##### _разработка Sayfullin R.R.
##### реализация я с FastAPI (бэкенд) и JavaScript (фронтенд) для регистрации и авторизации:

Инструкция актуальна для Linux-систем.
========================================================================================================================

Используемые технологии:
    python = "^3.11"
    fastapi= "^0.115.12"
    PostgreSQL

Скопируйте репозиторий с помощью команды:
$ git clone https://github.com/RuslanSayfullin/sayfullin.git
Перейдите в основную директорию с помощью команды: 
$ cd sayfullin/app

Интерактивная документация: http://localhost:8000/docs

========================================================================================================================

# Создать и активировать виртуальное окружение с помощью Poetry: 
    $ poetry env use python3.11
    $ poetry shell
# Установить зависимости:
    $ poetry install 
# Выход:
    $ exit
# Посмотреть список всех окружений
    $ poetry env list
# Удалить текущее активное окружение
    $ poetry env remove <имя_окружения>
# Вывести дерево зависимостей
    $ poetry shoe --tree

========================================================================================================================

# Создать и активировать виртуальное окружение с помощью venv:
    $ python3 -m venv venv 
    $ source venv/bin/activate 
# Установить зависимости из файла requirements.txt:
    (venv) $ pip install -r requirements.txt

# Cоздания файла зависимостейс помощью команды:
    $ pip freeze > requirements.txt

========================================================================================================================

Установка Postgres на VDS (Ubuntu/Debian)
Запускаем утилиту psql как пользователь postgres с правами sudo.
    $ sudo -u postgres psql
Создать БД:
    =# CREATE DATABASE portal;
Посмотреть список доступных баз данных:
    =# SELECT datname FROM pg_database;
Удалить базу данных:
    =# DROP DATABASE имя_базы;

Создание пользователя:
    =# CREATE USER portaluser WITH PASSWORD 'myPassword';
Даем права на базу командой:
    =# GRANT ALL PRIVILEGES ON DATABASE "portal" to portaluser;
Для просмотра всех пользователей:
    =# select * from pg_user;
Смена пароля:
    =# ALTER USER portaluser PASSWORD 'password'
Отозвать все привилегии от всех баз данных
    =# REVOKE ALL PRIVILEGES ON DATABASE portal FROM portaluser;
Удаление пользователя выполняется следующей командой:
    =# DROP USER portaluser;
Подключиться к базе данных:
    $ sudo -u postgres psql -d portal

Для безопасного хранения пароля и других чувствительных данных (например, в DATABASE_URL) используйте переменные окружения (environment variables).
1. Создайте файл .env в корне проекта и добаввялем переменные:

    # .env
    DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/portal
    Сгенерировать ключ командой: 
        $ openssl rand -hex 32
2. Установите python-dotenv(иблиотека загружает переменные из .env в os.environ):
    $ pip install python-dotenv

3. Загрузите переменные в код:

========================================================================================================================

Выводит список прослушиваемых (слушающих) сетевых сокетов с числовыми значениями портов и IP‑адресов, охватывая протоколы TCP и UDP: 
    $ ss -lntu 
    
Разбор опций:
    ‑l (--listening) — показывать только сокеты, которые находятся в состоянии прослушивания (т. е. ожидают входящих соединений).
    ‑n (--numeric) — выводить IP‑адреса и номера портов в числовом виде (без разрешения имён через DNS).
    ‑t (--tcp) — включать в вывод TCP‑сокеты.
    ‑u (--udp) — включать в вывод UDP‑сокеты.

Для каждого прослушиваемого сокета вы увидите:
    протокол (TCP или UDP);
    состояние (обычно LISTEN для TCP);
    локальный адрес и порт (куда приходят соединения);
    удалённый адрес и порт (для слушающих сокетов обычно *:*);
    иногда — дополнительную информацию (в зависимости от других опций).

Netid  State   Recv-Q  Send-Q   Local Address:Port   Peer Address:Port
tcp    LISTEN  0       128      0.0.0.0:22       0.0.0.0:*
udp    UNCONN  0       0        0.0.0.0:68       0.0.0.0:*
    
    0.0.0.0:22 — TCP‑порт 22 (SSH) прослушивается на всех интерфейсах.
    0.0.0.0:68 — UDP‑порт 68 (обычно DHCP‑клиент) не установлен (UNCONN).

Зачем это нужно
    Проверить, какие сервисы слушают сетевые порты.
    Найти «лишние» или неожиданные открытые порты (потенциальные точки входа для атак).
    Убедиться, что нужный сервис действительно запущен и слушает нужный порт.
    Диагностировать проблемы с сетевым подключением (например, если порт не прослушивается, хотя должен).

========================================================================================================================

Файл /etc/network/interfaces — это основной конфигурационный файл для настройки сетевых интерфейсов в дистрибутивах Linux на базе Debian (включая Ubuntu).

С его помощью задаётся:
    * статические или динамические (через DHCP) IP‑адреса;
    * маски подсети;
    * шлюзы по умолчанию;
    * DNS‑серверы;
    * правила активации интерфейсов при загрузке системы;
    * дополнительные команды до/после включения или отключения интерфейса.

Настройки из этого файла применяются при:
    * загрузке системы (если интерфейс настроен на автовключение);
    * ручном запуске команд ifup <интерфейс> (включить) и ifdown <интерфейс> (отключить).

Основные директивы
    * auto <интерфейс> — автоматически активировать интерфейс при загрузке (например, auto eth0).
    * iface <интерфейс> <семейство> <метод> — описать настройки интерфейса:
        <интерфейс> — имя интерфейса (например, eth0, wlan0, lo);
        <семейство> — семейство протоколов (inet для IPv4, inet6 для IPv6);
        <метод> — способ получения настроек (static — статический IP, dhcp — через DHCP).

    Дополнительные параметры внутри блока iface (зависят от метода):
        address — IP‑адрес;
        netmask — маска подсети;
        gateway — шлюз по умолчанию;
        dns-nameservers — серверы DNS;
        pre-up, post-up, pre-down, post-down — команды до/после активации или деактивации интерфейса.

Пример конфигурации

С DHCP:
    auto eth0
    iface eth0 inet dhcp

Со статическим IP:
    auto eth0
    iface eth0 inet static
        address 192.168.1.100
        netmask 255.255.255.0
        gateway 192.168.1.1
        dns-nameservers 8.8.8.8 8.8.4.4

Loopback‑интерфейс (всегда присутствует):
    auto lo
    iface lo inet loopback

Важные замечания
    В современных дистрибутивах (особенно в Ubuntu Desktop) этот файл часто пуст или закомментирован, так как управление сетью переложено на NetworkManager или netplan.
    Если вы редактируете /etc/network/interfaces, убедитесь, что другие сетевые менеджеры (например, NetworkManager) не конфликтуют с ним. При необходимости их нужно отключить.

После изменений примените их командой:
    $ sudo systemctl restart networking
или перезапустите конкретный интерфейс:
    $ sudo ifdown eth0 && sudo ifup eth0

Альтернативные системы настройки сети в Linux
    NetworkManager — графический и консольный инструмент для настольных систем.
    systemd-networkd — сервис для серверных и облачных сред.
    netplan — абстракция над разными бэкендами (используется в современных версиях Ubuntu).

========================================================================================================================

Удалить из файла known_hosts все записи (отпечатки ключей), связанные с хостом(IP-адрес):
    $ ssh-keygen -f "/home/cnc/.ssh/known_hosts" -R "255.255.255.255"
Чтобы сменить имя хоста (hostname) с old-name на new-name, выполните следующие шаги:
    $ sudo hostnamectl set-hostname new-name

========================================================================================================================

Первоначальная настройка Git, имя и адрес электронной почты:
    $ git config --global user.name "John Doe"
    $ git config --global user.email johndoe@example.com
    
========================================================================================================================

Работать под пользователем root – это не очень хорошая идея, особенно на боевом сервере. Создадим отдельного пользователя:
    $ adduser new-user
Добавить нового пользователя в группу sudo:
    $ usermod -aG sudo new-user
Просмотр всех учётных записей из файла /etc/passwd:
    $ getent passwd | awk -F: '$3 >= 1000 {print $1}'
Теперь переключитесь на нового пользователя:
    $ su -  new-user

========================================================================================================================

Для защиты сервера настройть ufw (Uncomplicated Firewall):
    $ sudo apt install ufw -y
    $ sudo ufw allow OpenSSH
    $ sudo ufw enable
Использовать Nginx, открыть порт 80 (HTTP) и 443 (HTTPS):
    $ sudo ufw allow 'Nginx Full'